<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Rhythm Records</title>
    <link rel="stylesheet" href="Fuentes/index.css">
    <link rel="icon" type="image/jpg" href="Fuentes/favicon.jpg">
    <style>
        .search-container {
            position: relative;
            display: inline-block;
        }

        #search-input {
            width: 200px;
            padding: 10px;
            margin: 10px 0;
        }

        .suggestions-box {
            position: absolute;
            background-color: white;
            border: 1px solid #ccc;
            width: 200px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .suggestion {
            padding: 10px;
            cursor: pointer;
        }

        .suggestion:hover {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <div class="titulo">
        <img src="Fuentes/Title.webp" alt="Rolling Stones" style="height: 200px;">
    </div>
    
    <div class="search-container">
        <input type="text" id="search-input" placeholder="Buscar producto..." onkeyup="searchProduct()" autocomplete="off">
        <div id="suggestions" class="suggestions-box"></div>
        <button onclick="searchProductPage()">Buscar</button>
    </div>

    <div class="productos">
        <!-- Producto 1 -->
        <a href="Productos/Producto1/producto1.html" class="producto-enlace">
            <div class="producto">
                <img src="Productos/Producto1/producto1.jpg" alt="Rolling Stones" style="height: 200px;">
                <h2>Let it Bleed</h2>
                <p>Rolling Stones</p>
                
            </div>
        </a>
        <!-- Producto 2 -->
        <a href="Productos/Producto2/producto2.html" class="producto-enlace">
            <div class="producto">
                <img src="Productos/Producto2/producto2.jpg" alt="Earth Wind & Fire" style="height: 200px;">
                <h2>Greatest Hits Vol.1</h2>
                <p>Earth Wind & Fire</p>
            </div>
        </a>
        <!-- Producto 3 -->
        <a href="Productos/Producto3/producto3.html" class="producto-enlace">
            <div class="producto">
                <img src="Productos/Producto3/producto3.jpg" alt="AC/DC" style="height: 200px;">
                <h2>AC/DC Live</h2>
                <p>AC/DC</p>
                
            </div>
        </a>
    </div>

    <div>
        <a href="/login.html" class="btn-login">Iniciar sesión / Registrarse</a>
    </div>
        
    <div id="cart-button-placeholder">
        <a href="/login.html"><img src="Fuentes/carrito.webp" style="height: 75px;" alt="Carrito" class="cart-button"></a>
    </div>

    <script>
        console.log('Script cargado correctamente'); // Log para verificar que el script se carga
        function searchProduct() {
            const input = document.getElementById('search-input').value;
            const suggestionsBox = document.getElementById('suggestions');
            console.log('Input value:', input); // Log del valor del input
            if (input.length >= 3) {
                fetch(`/search?query=${input}`)
                    .then(response => response.json())
                    .then(data => {
                        console.log('Suggestions data:', data); // Log de los datos de sugerencias
                        suggestionsBox.innerHTML = '';
                        if (data.length > 0) {
                            data.forEach(item => {
                                let div = document.createElement('div');
                                div.className = 'suggestion';
                                div.innerHTML = item.nombre;
                                div.onclick = () => {
                                    document.getElementById('search-input').value = item.nombre;
                                    suggestionsBox.innerHTML = '';
                                    suggestionsBox.style.display = 'none';
                                };
                                suggestionsBox.appendChild(div);
                            });
                            suggestionsBox.style.display = 'block';
                        } else {
                            suggestionsBox.style.display = 'none';
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching suggestions:', error);
                    });
            } else {
                suggestionsBox.innerHTML = '';
                suggestionsBox.style.display = 'none';
            }
        }

        function searchProductPage() {
            const input = document.getElementById('search-input').value;
            console.log('Searching for:', input); // Log del valor de búsqueda
            window.location.href = `/search?query=${input}`;
        }
    </script>
</body>
</html>
